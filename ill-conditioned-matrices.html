<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ill-conditioned Matrices</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Nekoo">

    <!-- Le styles -->
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="/theme/css/font-awesome.css" rel="stylesheet">

    <link href="/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png">

    <link href="/" type="application/atom+xml" rel="alternate" title="Yet another site ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/index.html">Yet another site </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li >
                    <a href="/category/ceres.html">
						<i class="icon-folder-open icon-large"></i>ceres
					</a>
                  </li>
                  <li >
                    <a href="/category/compiler.html">
						<i class="icon-folder-open icon-large"></i>Compiler
					</a>
                  </li>
                  <li >
                    <a href="/category/eigen.html">
						<i class="icon-folder-open icon-large"></i>Eigen
					</a>
                  </li>
                  <li >
                    <a href="/category/german.html">
						<i class="icon-folder-open icon-large"></i>German
					</a>
                  </li>
                  <li class="active">
                    <a href="/category/math.html">
						<i class="icon-folder-open icon-large"></i>Math
					</a>
                  </li>
                  <li >
                    <a href="/category/other.html">
						<i class="icon-folder-open icon-large"></i>Other
					</a>
                  </li>
                  <li >
                    <a href="/category/programming.html">
						<i class="icon-folder-open icon-large"></i>Programming
					</a>
                  </li>
                  <li >
                    <a href="/category/slam.html">
						<i class="icon-folder-open icon-large"></i>SLAM
					</a>
                  </li>
                  <li >
                    <a href="/category/vim.html">
						<i class="icon-folder-open icon-large"></i>Vim
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to ill-conditioned Matrices">
                                        ill-conditioned Matrices
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2019-01-21T14:50:04+01:00">
        <i class="icon-calendar"></i>Mon 21 January 2019
</abbr>
<span class="label">By</span>
<a href="/author/nekoo.html"><i class="icon-user"></i>Nekoo</a>
<span class="label">Category</span>
<a href="/category/math.html"><i class="icon-folder-open"></i>Math</a>.


<span class="label">Tags</span>
	<a href="/tag/math.html"><i class="icon-tag"></i>Math</a>
</footer><!-- /.post-info -->                </div>
                <h1>What is an ill-conditioned matrix?<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup></h1>
<p>A matrix can represent a mapping from one space to another space. The
conditioning number of a matrix gives us the ratio of how crazy this mapping
can be. The conditioning number is the ratio of the largest singular value to
the smallest singular value.</p>
<p>A matrix is ill-conditioned if the conditioning number is very high. What this
means is that calculations using this matrix are prone to introduce numerical
errors that can overwhelm your calculation. Computers cannot hold an infinite
amount of information. Numbers in a floating point representation can only hold
so much precision.</p>
<p>For example if 𝐴 is ill-conditioned and I try to solve 𝐴𝑥=𝑏
using Gauss-Jordan elimination I will quickly pick up numerical errors, and
then those numerical errors are used on the next step which creates even larger
errors, which are used on the next step and so on.</p>
<p>So what do you do when you have an ill-conditioned matrix? You reformulate
your problem by doing something called preconditioning. This allows you to work
in a space where your transformations aren’t as badly behaved and errors can be
kept under control.</p>
<h1>Poorly conditioned Hessian matrix<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup></h1>
<p>Condition number of a matrix is the ratio of the largest singular value to the
smallest singular value. A matrix is ill-conditioned if the condition number is
very high, usually indicating that (i) the lowest singular value is orders of
magnitude smaller than the highest one, and (ii) columns/rows of the matrix are
heavily correlated with each other leading to redundancies and a matrix that is
pretending to be of a higher rank than it truly is.</p>
<p>Hessian encodes the second derivatives of a function with respect to all pairs
of variables. So, if there are n inputs to a function, the gradient is 𝑛
-dimensional and the Hessian is 𝑛x𝑛-dimensional. In machine learning, the inputs
are usually the features and the function is usually a loss function we are
trying to minimize. When the Hessian is ill-conditioned, it means the basins of
the loss function have contours that are very long “ellipsoids” rather than being close to “circular”.</p>
<p><img src="images/ic-1.gif" alt="01" title="01" style="max-width:80%;max-height:80%"/></p>
<p>This causes problems for first-order optimization methods like gradient descent
(𝑤=𝑤−𝜂∇𝑤) which need to follow a very zigzag path to the minimum. The first
figure below shows the gradient directions at various points on a straight line
through the parameter space. Notice how the directions away from the center are
nearly orthogonal to the useful direction of descent. The second figure shows
the zigzag path gradient descent has to take if the Hessian is ill-conditioned,
the function contours are stretched out, and the gradients often point to directions
that might not be the best way to descend to the minimum.</p>
<p><img src="images/ic-2.png" alt="02" title="02" style="max-width:80%;max-height:80%"/></p>
<p><img src="images/ic-3.png" alt="03" title="03" style="max-width:80%;max-height:80%"/></p>
<p>You would think that second-order optimization would solve this problem. It sort
of does if the Hessian is not too ill-conditioned. However, a poorly conditioned
Hessian is problematic because a typical second-order optimization requires
inversion of a Hessian: 𝑤=𝑤−𝜂𝐻−1∇𝑤 (First-order optimization methods therefore
assume 𝐻=𝐼, the identity matrix i.e. the problem is ideally conditioned for
gradient descent-like methods.) Inverse of 𝐻with SVD decomposition 𝐻=𝑈Σ𝑉𝑇 is
given as 𝐻−1=𝑈Σ−1𝑉𝑇. Here Σ is a diagonal matrix with singular values on the
diagonal. Note, if the Hessian is ill-conditioned, the inverse can be numerically
unstable since the smallest singular values blow up on inversion. A singular
value of 10−6 appears as 106 in Σ−1. Thus, the more ill-conditioned the Hessian
is, the more numerically unstable its inverse. Any noise in computing the Hessian
such as that introduced by using stochastic versions of descent updates or using
minibatches amplifies tremendously when the Hessian is inverted. Methods likes
L-BFGS get around this by maintaining a low-rank approximation of the (inverse)
Hessian which is better suited for ill-conditioned problems as well as saves
computation and space required to implement second-order optimization.</p>
<h1><a href="https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/04LinearAlgebra/illconditioned/">uwaterloo: Numerical Analysis: ill conditioned matrices</a></h1>
<p><a href="https://en.wikipedia.org/wiki/Numerical_stability">Wiki: numerical stability</a></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>https://www.quora.com/What-is-an-ill-conditioned-matrix&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>https://www.quora.com/What-does-it-mean-to-have-a-poorly-conditioned-Hessian-matrix&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                </div><!-- /.entry-content -->
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><a href="http://getpelican.com/"><i class="icon-external-link"></i>Pelican</a></li>
    <li><a href="http://python.org/"><i class="icon-external-link"></i>Python.org</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="/category/ceres.html">
    <i class="icon-folder-open icon-large"></i>ceres
</a>
</li>
<li>
<a href="/category/compiler.html">
    <i class="icon-folder-open icon-large"></i>Compiler
</a>
</li>
<li>
<a href="/category/eigen.html">
    <i class="icon-folder-open icon-large"></i>Eigen
</a>
</li>
<li>
<a href="/category/german.html">
    <i class="icon-folder-open icon-large"></i>German
</a>
</li>
<li>
<a href="/category/math.html">
    <i class="icon-folder-open icon-large"></i>Math
</a>
</li>
<li>
<a href="/category/other.html">
    <i class="icon-folder-open icon-large"></i>Other
</a>
</li>
<li>
<a href="/category/programming.html">
    <i class="icon-folder-open icon-large"></i>Programming
</a>
</li>
<li>
<a href="/category/slam.html">
    <i class="icon-folder-open icon-large"></i>SLAM
</a>
</li>
<li>
<a href="/category/vim.html">
    <i class="icon-folder-open icon-large"></i>Vim
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->



    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery-1.7.2.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>